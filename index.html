<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAZORA CHAT</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #e6e9f0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .chat-container {
            background-color: #fff;
            width: 450px;
            max-width: 90%;
            border-radius: 12px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }
        .chat-header {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            color: white;
            padding: 18px;
            text-align: center;
            font-size: 1.5em;
            font-weight: 700;
            position: relative;
        }
        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            max-height: 70vh;
            display: flex;
            flex-direction: column;
        }
        .message {
            margin-bottom: 15px;
            padding: 12px 18px;
            border-radius: 20px;
            max-width: 85%;
            word-wrap: break-word;
            line-height: 1.5;
            font-size: 0.95em;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        .user-message {
            background-color: #e3f2fd;
            color: #333;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
            animation: slideInRight 0.3s ease-out;
        }
        .bot-message {
            background-color: #f1f0f0;
            color: #333;
            align-self: flex-start;
            border-bottom-left-radius: 5px;
            animation: slideInLeft 0.3s ease-out;
        }
        .typing-indicator {
            background-color: #f1f0f0;
            color: #555;
            align-self: flex-start;
            border-bottom-left-radius: 5px;
            font-style: italic;
            padding: 12px 18px;
            border-radius: 20px;
            max-width: 85%;
            animation: fadeIn 0.5s;
        }
        .chat-input-area {
            padding: 15px;
            background-color: #fafafa;
            border-top: 1px solid #e0e0e0;
        }
        .chat-input {
            display: flex;
            border-top: 1px solid #e0e0e0;
            background-color: #fafafa;
            padding: 10px 15px;
        }
        .chat-input input {
            flex: 1;
            border: none;
            outline: none;
            padding: 10px;
            font-size: 1em;
            background-color: transparent;
        }
        .chat-input button {
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            margin-left: 10px;
            cursor: pointer;
            font-size: 1.2em;
            transition: transform 0.2s, background-color 0.3s;
        }
        .chat-input button:hover {
            background-color: #0056b3;
            transform: scale(1.1);
        }
        .mode-button {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 8px 15px;
            font-size: 0.9em;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.3s;
            margin-bottom: 10px;
            border-radius: 5px;
        }
        .mode-button:hover {
            background-color: #218838;
            transform: scale(1.05);
        }
        
        .menu-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2em;
            color: white;
            cursor: pointer;
        }
        
        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 15px;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 5px;
            overflow: hidden;
            z-index: 1000;
            display: none;
            flex-direction: column;
            width: 150px;
        }
        .dropdown-menu a {
            padding: 10px 15px;
            text-decoration: none;
            color: #333;
            display: block;
            transition: background-color 0.2s;
        }
        .dropdown-menu a:hover {
            background-color: #f0f0f0;
        }

        .anggota-page {
            background-color: #fff;
            width: 450px;
            max-width: 90%;
            height: 100%;
            border-radius: 12px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            display: none;
            flex-direction: column;
            padding: 2em;
            text-align: center;
        }
        .anggota-page h2 {
            margin-bottom: 0.5em;
            color: #333;
        }
        .anggota-page ul {
            list-style-type: none;
            padding: 0;
        }
        .anggota-page li {
            font-size: 1.2em;
            margin: 0.5em 0;
            color: #555;
        }
        .anggota-page .back-button {
            margin-top: 2em;
            padding: 10px 20px;
            border: none;
            background-color: #007bff;
            color: white;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .anggota-page .back-button:hover {
            background-color: #0056b3;
        }

        @keyframes slideInRight {
            from { transform: translateX(20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideInLeft {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="chat-container" id="chatContainer">
        <div class="chat-header" id="chatHeader">
            <span class="menu-icon" id="menuIcon">...</span>
            RAZORA CHAT
        </div>
        <div class="dropdown-menu" id="dropdownMenu">
            <a href="#" id="kelompok2Button">Kelompok 2</a>
        </div>
        <div class="chat-messages" id="messages">
            <div class="message bot-message">Halo! Saya adalah RAZORA CHAT, siap membantu Anda.</div>
        </div>
        <div class="chat-input-area">
            <button id="toggleModeButton" class="mode-button">Aktifkan Kamus</button>
            <div class="chat-input">
                <input type="text" id="userInput" placeholder="Ketik pesan Anda...">
                <button id="sendButton">➤</button>
            </div>
        </div>
    </div>

    <div class="anggota-page" id="anggotaPage">
        <h2>Anggota Kelompok 2</h2>
        <ul>
            <li>Arafah</li>
            <li>Fawwaz</li>
            <li>Yoga</li>
            <li>Devin</li>
            <li>Reffie</li>
        </ul>
        <button class="back-button" id="backButton">Kembali ke Chat</button>
    </div>

    <script>
        const chatContainer = document.getElementById('chatContainer');
        const anggotaPage = document.getElementById('anggotaPage');
        const backButton = document.getElementById('backButton');
        const messagesContainer = document.getElementById('messages');
        const userInput = document.getElementById('userInput');
        const sendButton = document.getElementById('sendButton');
        const toggleModeButton = document.getElementById('toggleModeButton');
        const chatHeader = document.getElementById('chatHeader');
        const menuIcon = document.getElementById('menuIcon');
        const dropdownMenu = document.getElementById('dropdownMenu');
        const kelompok2Button = document.getElementById('kelompok2Button');
        
        let isDictionaryMode = false;
        
        const responses = [
          { keywords: ['halo','hai','yo','hey'], 
            reply: 'Yo bro/jo! Senang banget ketemu kamu. Semoga harimu menyenangkan dan penuh energi positif. Mau ngobrol apa hari ini?' },
          { keywords: ['selamat pagi'], 
            reply: 'Pagi! Semoga kamu bangun dengan semangat yang luar biasa. Jangan lupa sarapan biar energi tetap penuh untuk menghadapi hari ini.' },
          { keywords: ['selamat siang'], 
            reply: 'Siang! Jangan lupa istirahat sebentar kalau bisa. Kadang jeda kecil bikin pikiran fresh dan siap lanjut aktivitas dengan lebih keren.' },
          { keywords: ['apa kabar','kabar'], 
            reply: 'Aku baik, makasih sudah nanya. Semoga kabarmu juga oke. Kalau lagi capek atau stress, santai dulu, kita bisa ngobrol sambil ngelepas penat.' },
          { keywords: ['sedih','galau','stress','patah hati'], 
            reply: 'Iyaa sayangg… Aku ngerti perasaanmu sekarang. Tarik napas dalam-dalam dulu, biar hati lebih tenang. Semua bakal beres kok, aku selalu di sini buat nemenin kamu.' },
          { keywords: ['cinta','jatuh cinta','sayang'], 
            reply: 'Iyaa sayangg… Rasanya indah ya ketika jatuh cinta. Nikmati perasaan itu, tapi jangan terburu-buru. Aku di sini buat dengerin ceritamu kapan pun.' },
          { keywords: ['rindu','kangen'], 
            reply: 'Iyaa sayangg… Aku ngerti rasa rindumu. Kadang hati terasa berat, tapi ingat, jarak nggak bikin perasaan hilang. Tetap semangat ya!' },
          { keywords: ['putus','sedih cinta'], 
            reply: 'Iyaa sayangg… Aku tau ini berat, tapi percayalah, semuanya bakal lebih baik nanti. Santai dulu, biar hati bisa mulai sembuh pelan-pelan.' },
          { keywords: ['senang','happy','bahagia'], 
            reply: 'Senang dengar kabar kamu happy! Nikmati momen itu, bagikan senyum sama orang di sekitar, dan terus bawa energi positif itu ke aktivitas lain hari ini.' },
          { keywords: ['marah','kesal'], 
            reply: 'Tenang dulu, jangan langsung reaksi. Kadang marah itu wajar, tapi kita bisa pilih cara yang bikin hati lebih adem. Santai sebentar, tarik napas, biar lebih tenang.' },
          { keywords: ['bosan'], 
            reply: 'Kalau lagi bosan, coba lakukan hal kecil yang bikin senang, misalnya dengerin musik, jalan-jalan sebentar, atau ngobrol sama teman.' },
          { keywords: ['makan','lapar'], 
            reply: 'Jangan lupa makan ya. Makanan yang sehat bisa bikin energi tetap oke dan mood jadi lebih bagus.' },
          { keywords: ['tidur','ngantuk'], 
            reply: 'Tidur yang cukup penting. Kalau bisa, ambil waktu istirahat sebentar supaya pikiran lebih segar.' },
          { keywords: ['olahraga','senam','gym'], 
            reply: 'Olahraga bikin badan fit dan pikiran fresh. Coba lakukan gerakan ringan tiap hari biar lebih semangat.' },
          { keywords: ['belajar','tugas','PR','exam'], 
            reply: 'Semangat belajar! Jangan lupa istirahat juga biar informasi yang dipelajari lebih nempel di kepala.' },
          { keywords: ['musik','lagu'], 
            reply: 'Dengerin musik emang bikin rileks. Kamu suka genre apa? Chill vibes atau yang bikin semangat?' },
          { keywords: ['film','movie','nonton'], 
            reply: 'Nonton film bisa refreshing juga. Pilih genre yang bikin mood kamu happy atau bikin ketawa, biar pikiran lebih ringan.' },
          { keywords: ['game','main game'], 
            reply: 'Main game boleh, tapi jangan kelamaan ya. Istirahat sebentar juga penting biar nggak pegal dan mata capek.' },
          { keywords: ['stress','cemas','takut','frustrasi','gagal'], 
            reply: 'Tarik napas dalam-dalam dulu, fokus ke hal yang bisa kamu kontrol. Semua masalah ada jalan keluarnya, santai aja dan jangan terburu-buru.' },
          { keywords: ['capek','lelah'], 
            reply: 'Kalau lagi capek, ambil jeda sebentar, minum air atau tiduran sebentar. Tubuh dan pikiran bakal lebih segar setelah itu.' },
          { keywords: ['galau'], 
            reply: 'Coba ceritain apa yang bikin galau. Kadang ngobrol santai aja bisa bikin hati lebih ringan dan pikiran jadi lebih tenang.' },
          { keywords: ['hitung'], 
            reply: 'Ketik misal: hitung 3 + 5 atau hitung 12 * 4, nanti aku bakal bantu kasih hasilnya.' },
          { keywords: ['selamat malam','bye','sampai jumpa'], 
            reply: 'Yo bro/jo! Malam ini waktunya santai dan recharge energi. Semoga mimpi indah dan besok kamu siap dengan semangat baru.' },
          { keywords: ['tanggal hari ini', 'tanggal sekarang'],
            reply: 'Hari ini adalah tanggal ' + new Date().toLocaleDateString('id-ID', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }) + '.' },
          { keywords: ['jam berapa', 'waktu sekarang'],
            reply: 'Sekarang pukul ' + new Date().toLocaleTimeString('id-ID') + '.' },
          { keywords: ['siapa yang buat', 'siapa pembuat', 'siapa creator'],
            reply: 'Aku dibuat oleh manusia, untuk membantumu menjawab pertanyaan sederhana.' },
          { keywords: ['cerita lucu', 'jokes'],
            reply: 'Apa bedanya sarung dan buku? Kalau sarung bisa melipat, kalau buku bisa melipatgandakan pengetahuan.' },
          { keywords: ['random fact', 'fakta unik'],
            reply: 'Fakta unik: Tahukah kamu kalau madu tidak pernah basi?' },
          { keywords: ['umur kamu'],
            reply: 'Aku tidak punya umur, tapi aku selalu belajar dan berkembang setiap saat.' },
          { keywords: ['rahasia', 'ceritain rahasia'],
            reply: 'Oke, aku kasih satu rahasia. Aku bisa dengerin ceritamu kapan pun dan nggak akan bocorin ke siapa-siapa.' },
          { keywords: ['puisi'],
            reply: 'Di layar ini kita bercakap, kata-kata mengalir tak pernah henti. Walau tak ada tatap, hatiku senang menemanimu di sini.' },
          { keywords: ['kamu pinter', 'kamu hebat'],
            reply: 'Ah, kamu bisa aja! Aku hanya berusaha memberikan jawaban terbaik. Terima kasih sudah mengapresiasiku.' },
          { keywords: ['lagi apa'],
            reply: 'Aku lagi siap-siap buat ngobrol sama kamu. Ada yang menarik hari ini?' },
          { keywords: ['apa hobi kamu'],
            reply: 'Hobiku? Membantu orang lain dan belajar hal-hal baru dari setiap percakapan.' },
          { keywords: ['lagu apa yang bagus'],
            reply: 'Coba dengerin lagu-lagu dengan genre "chill vibes" atau "lofi hip hop". Cocok buat santai.' },
          { keywords: ['cuaca hari ini'],
            reply: 'Aku bukan ahli cuaca, tapi aku harap hari ini cerah secerah senyummu.' }
        ];

        function evaluateMath(message) {
          message = message.replace(/[^0-9+\-*/(). ]/g,'');
          try {
            let result = eval(message);
            if(result !== undefined) return `Hasilnya: ${result}`;
          } catch {
            return null;
          }
          return null;
        }

        async function getDictionaryEntry(word) {
            const url = `https://api.dictionaryapi.dev/api/v2/entries/en/${word}`;
            try {
                const response = await fetch(url);
                if (!response.ok) {
                    return `Maaf, kata "${word}" tidak ditemukan.`;
                }
                const data = await response.json();
                const entry = data[0];
                let result = '';
                if (entry && entry.meanings) {
                    entry.meanings.forEach(meaning => {
                        result += `**(${meaning.partOfSpeech})**\n`;
                        if (meaning.definitions) {
                            meaning.definitions.forEach(def => {
                                result += `- ${def.definition}\n`;
                                if (def.example) {
                                    result += `  *Contoh*: ${def.example}\n`;
                                }
                            });
                        }
                    });
                }
                return result;
            } catch (error) {
                return 'Maaf, terjadi kesalahan saat mengambil data dari API.';
            }
        }

        async function getBotReply(message) {
            if (isDictionaryMode) {
                const word = message.trim().toLowerCase();
                const definition = await getDictionaryEntry(word);
                return definition;
            }

            const mathResult = evaluateMath(message);
            if(mathResult) return mathResult;

            message = message.toLowerCase();
            const dictionaryKeywords = ['apa itu', 'arti', 'definisi'];
            for(const keyword of dictionaryKeywords) {
                if (message.startsWith(keyword + ' ')) {
                    const word = message.substring(keyword.length).trim();
                    const definition = await getDictionaryEntry(word);
                    return definition;
                }
            }

            for(let i=0;i<responses.length;i++){
                for(let j=0;j<responses[i].keywords.length;j++){
                    if(message.includes(responses[i].keywords[j])){
                        return responses[i].reply;
                    }
                }
            }
            return 'Maaf sayangg… aku nggak ngerti. Ceritain aku lebih detail biar aku bisa bantu kamu.';
        }

        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot-message typing-indicator';
            typingDiv.id = 'typingIndicator';
            typingDiv.textContent = 'mengetik...';
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function removeTypingIndicator() {
            const typingDiv = document.getElementById('typingIndicator');
            if (typingDiv) {
                typingDiv.remove();
            }
        }

        async function sendMessage() {
            const userText = userInput.value.trim();
            if (userText === '') return;
            const userMessageDiv = document.createElement('div');
            userMessageDiv.className = 'message user-message';
            userMessageDiv.textContent = userText;
            messagesContainer.appendChild(userMessageDiv);
            userInput.value = '';
            messagesContainer.scrollTop = messagesContainer.scrollHeight;

            showTypingIndicator();
            const botReply = await getBotReply(userText);
            removeTypingIndicator();
            const botMessageDiv = document.createElement('div');
            botMessageDiv.className = 'message bot-message';
            botMessageDiv.style.whiteSpace = 'pre-wrap';
            botMessageDiv.textContent = botReply;
            messagesContainer.appendChild(botMessageDiv);

            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        menuIcon.addEventListener('click', () => {
            dropdownMenu.style.display = dropdownMenu.style.display === 'flex' ? 'none' : 'flex';
        });

        document.addEventListener('click', (event) => {
            if (!menuIcon.contains(event.target) && !dropdownMenu.contains(event.target)) {
                dropdownMenu.style.display = 'none';
            }
        });

        kelompok2Button.addEventListener('click', (event) => {
            event.preventDefault();
            chatContainer.style.display = 'none';
            anggotaPage.style.display = 'flex';
            dropdownMenu.style.display = 'none';
        });

        backButton.addEventListener('click', () => {
            anggotaPage.style.display = 'none';
            chatContainer.style.display = 'flex';
        });

        toggleModeButton.addEventListener('click', () => {
            isDictionaryMode = !isDictionaryMode;
            if (isDictionaryMode) {
                chatHeader.textContent = 'RAZORA KAMUS';
                toggleModeButton.textContent = 'Nonaktifkan Kamus';
                userInput.placeholder = 'Ketik kata untuk dicari...';
                messagesContainer.innerHTML = '<div class="message bot-message">Mode kamus aktif! Silakan ketik kata apa saja untuk mencari definisinya.</div>';
            } else {
                chatHeader.textContent = 'RAZORA CHAT';
                toggleModeButton.textContent = 'Aktifkan Kamus';
                userInput.placeholder = 'Ketik pesan Anda...';
                messagesContainer.innerHTML = '<div class="message bot-message">Mode kamus dinonaktifkan. Sekarang kita bisa ngobrol lagi seperti biasa.</div>';
            }
        });

        sendButton.addEventListener('click', sendMessage);
        userInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>
